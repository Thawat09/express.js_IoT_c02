<!DOCTYPE html>
<html lang="en">
<%- include('head.ejs') %>

    <body class="nav-fixed">
        <%- include('navbar.ejs') %>
            <div id="layoutSidenav">
                <%- include('sidebar.ejs') %>
                    <div id="layoutSidenav_content">
                        <main>
                            <!-- Main page content-->
                            <div class="container-xl px-4 mt-5">
                                <!-- Custom page header alternative example-->
                                <div
                                    class="d-flex justify-content-between align-items-sm-center flex-column flex-sm-row mb-4">
                                    <div class="me-4 mb-3 mb-sm-0">
                                        <h1 class="mb-0 text-white">Dashboard</h1>
                                        <div class="small">
                                            <i class="far fa-clock fa-spin fa-lg text-white-50"></i>
                                            <span class="fw-500 text-white-50" id="time"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xl-3 col-md-6 mb-4">
                                        <!-- Dashboard info widget 1-->
                                        <div class="card border-start-lg border-start-warning h-100">
                                            <div class="card-body">
                                                <% if (temp) { %>
                                                    <div class="d-flex align-items-center">
                                                        <div class="flex-grow-1">
                                                            <div class="fw-bold text-warning mb-1">Temperature
                                                            </div>
                                                            <div class="h1" id="tempdata">
                                                            </div>
                                                            <div
                                                                class="text-xs fw-bold text-success d-inline-flex align-items-center">
                                                            </div>
                                                        </div>
                                                        <div class="ms-2"><i
                                                                class="fas fa-temperature-high fa-5x text-gray-200"></i>
                                                        </div>
                                                    </div>
                                                    <% } %>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6 mb-4">
                                        <!-- Dashboard info widget 2-->
                                        <div class="card border-start-lg border-start-primary h-100">
                                            <div class="card-body">
                                                <% if (temp) { %>
                                                    <div class="d-flex align-items-center">
                                                        <div class="flex-grow-1">
                                                            <div class="fw-bold text-primary mb-1">Humidity
                                                            </div>
                                                            <div class="h1" id="humdata">
                                                            </div>
                                                            <div
                                                                class="text-xs fw-bold text-danger d-inline-flex align-items-center">
                                                            </div>
                                                        </div>
                                                        <div class="ms-2"><i
                                                                class="fas fa-cloud-rain fa-5x text-gray-200"></i>
                                                        </div>
                                                    </div>
                                                    <% } %>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6 mb-4">
                                        <!-- Dashboard info widget 3-->
                                        <div class="card border-start-lg border-start-success h-100">
                                            <div class="card-body">
                                                <% if (temp) { %>
                                                    <div class="d-flex align-items-center">
                                                        <div class="flex-grow-1">
                                                            <div class="fw-bold text-success mb-1">PM 2.5</div>
                                                            <div class="h1" id="aqidata">
                                                            </div>
                                                            <div
                                                                class="text-xs fw-bold text-success d-inline-flex align-items-center">
                                                            </div>
                                                        </div>
                                                        <div class="ms-2"><i
                                                                class="fas fa-virus fa-5x text-gray-200"></i>
                                                        </div>
                                                    </div>
                                                    <% } %>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6 mb-4">
                                        <!-- Dashboard info widget 2-->
                                        <div class="card border-start-lg border-start-red h-100">
                                            <div class="card-body">
                                                <% if (temp) { %>
                                                    <div class="d-flex align-items-center">
                                                        <div class="flex-grow-1">
                                                            <div class="fw-bold text-red mb-1">Power
                                                            </div>
                                                            <div class="h1" id="currentdata">
                                                            </div>
                                                            <div
                                                                class="text-xs fw-bold text-danger d-inline-flex align-items-center">
                                                            </div>
                                                        </div>
                                                        <div class="ms-2"><i
                                                                class="fas fa-plug fa-5x text-gray-200"></i>
                                                        </div>
                                                    </div>
                                                    <% } %>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 mb-4">
                                        <!-- Bar chart example-->
                                        <div class="card h-100">
                                            <div class="card-header border-bottom">
                                                <!-- Dashboard card navigation 1-->
                                                <ul class="nav nav-tabs card-header-tabs" id="dashboardNav"
                                                    role="tablist">
                                                    <li class="nav-item me-1"><a class="nav-link active"
                                                            id="temperature1-pill" href="#temperature1"
                                                            data-bs-toggle="tab" role="tab" aria-controls="temperature1"
                                                            aria-selected="true">Temperature</a>
                                                    </li>
                                                    <li class="nav-item"><a class="nav-link" id="humidity1-pill"
                                                            href="#humidity1" data-bs-toggle="tab" role="tab"
                                                            aria-controls="humidity1" aria-selected="false">Humidity</a>
                                                    </li>
                                                    <li class="nav-item"><a class="nav-link" id="aqi1-pill" href="#aqi1"
                                                            data-bs-toggle="tab" role="tab" aria-controls="aqi1"
                                                            aria-selected="false">AQI</a></li>
                                                    <li class="nav-item"><a class="nav-link" id="current1-pill"
                                                            href="#current1" data-bs-toggle="tab" role="tab"
                                                            aria-controls="current1" aria-selected="false">Power</a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="card-body">
                                                <div class="tab-content" id="dashboardNavContent">
                                                    <!-- Dashboard Tab Pane 1-->
                                                    <div class="tab-pane fade show active" id="temperature1"
                                                        role="tabpanel" aria-labelledby="temperature1-pill">
                                                        <div class="chart-bar" style="height: 20rem">
                                                            <canvas id="myBarChart" width="100%" height="30"></canvas>
                                                        </div>
                                                    </div>
                                                    <!-- Dashboard Tab Pane 2-->
                                                    <div class="tab-pane fade" id="humidity1" role="tabpanel"
                                                        aria-labelledby="humidity1-pill">
                                                        <div class="chart-bar" style="height: 20rem">
                                                            <canvas id="myBarChart1" width="100%" height="30"></canvas>
                                                        </div>
                                                    </div>
                                                    <!-- Dashboard Tab Pane 3-->
                                                    <div class="tab-pane fade" id="aqi1" role="tabpanel"
                                                        aria-labelledby="aqi1-pill">
                                                        <div class="chart-bar" style="height: 20rem">
                                                            <canvas id="myBarChart2" width="100%" height="30"></canvas>
                                                        </div>
                                                    </div>
                                                    <!-- Dashboard Tab Pane 4-->
                                                    <div class="tab-pane fade" id="current1" role="tabpanel"
                                                        aria-labelledby="current1-pill">
                                                        <div class="chart-bar" style="height: 20rem">
                                                            <canvas id="myBarChart3" width="100%" height="30"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-4">
                                        <!-- Area chart example-->
                                        <div class="card mb-4">
                                            <div class="card card-header-actions h-100">
                                                <div class="card-header border-bottom">
                                                    <!-- Dashboard card navigation-->
                                                    <ul class="nav nav-tabs card-header-tabs" id="dashboardNav"
                                                        role="tablist">
                                                        <li class="nav-item me-1"><a class="nav-link active"
                                                                id="temperature-pill" href="#temperature"
                                                                data-bs-toggle="tab" role="tab"
                                                                aria-controls="temperature"
                                                                aria-selected="true">Temperature</a>
                                                        </li>
                                                        <li class="nav-item"><a class="nav-link" id="humidity-pill"
                                                                href="#humidity" data-bs-toggle="tab" role="tab"
                                                                aria-controls="humidity"
                                                                aria-selected="false">Humidity</a></li>
                                                        <li class="nav-item"><a class="nav-link" id="aqi-pill"
                                                                href="#aqi" data-bs-toggle="tab" role="tab"
                                                                aria-controls="aqi" aria-selected="false">AQI</a></li>
                                                        <li class="nav-item"><a class="nav-link" id="current-pill"
                                                                href="#current" data-bs-toggle="tab" role="tab"
                                                                aria-controls="current" aria-selected="false">Power</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="card-body">
                                                    <div class="tab-content" id="dashboardNavContent">
                                                        <!-- Dashboard Tab Pane 1-->
                                                        <div class="tab-pane fade show active" id="temperature"
                                                            role="tabpanel" aria-labelledby="temperature-pill">
                                                            <div class="chart-area mb-4 mb-lg-0" style="height: 20rem">
                                                                <canvas id="myAreaChart" width="100%"
                                                                    height="30"></canvas>
                                                            </div>
                                                        </div>
                                                        <!-- Dashboard Tab Pane 2-->
                                                        <div class="tab-pane fade" id="humidity" role="tabpanel"
                                                            aria-labelledby="humidity-pill">
                                                            <div class="chart-area mb-4 mb-lg-0" style="height: 20rem">
                                                                <canvas id="myAreaChart1" width="100%"
                                                                    height="30"></canvas>
                                                            </div>
                                                        </div>
                                                        <!-- Dashboard Tab Pane 3-->
                                                        <div class="tab-pane fade" id="aqi" role="tabpanel"
                                                            aria-labelledby="aqi-pill">
                                                            <div class="chart-area mb-4 mb-lg-0" style="height: 20rem">
                                                                <canvas id="myAreaChart2" width="100%"
                                                                    height="30"></canvas>
                                                            </div>
                                                        </div>
                                                        <!-- Dashboard Tab Pane 4-->
                                                        <div class="tab-pane fade" id="current" role="tabpanel"
                                                            aria-labelledby="current-pill">
                                                            <div class="chart-area mb-4 mb-lg-0" style="height: 20rem">
                                                                <canvas id="myAreaChart3" width="100%"
                                                                    height="30"></canvas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Illustration dashboard card example-->
                            <div class="container-xl px-4 mt-2">
                                <div class="row">
                                    <div class="col-xxl-4 col-xl-12 mb-4">
                                        <!-- Pie chart with legend example-->
                                        <div class="card h-100">
                                            <div class="card-header">Temperature</div>
                                            <div class="card-body">
                                                <div class="chart-pie mb-4"><canvas id="myPieChart" width="100%"
                                                        height="50"></canvas></div>
                                                <div class="list-group list-group-flush">
                                                    <div
                                                        class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                        <div class="me-3">
                                                            <i class="fas fa-circle fa-sm me-1 text-warning"></i>
                                                            Temperature
                                                        </div>
                                                        <div class="fw-500 text-dark" id="resultX"></div>
                                                    </div>
                                                    <div
                                                        class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                        <div class="me-3">
                                                            <i class="fas fa-circle fa-sm me-1 text-muted"></i>
                                                            Remaining Area
                                                        </div>
                                                        <div class="fw-500 text-dark" id="resultY"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-xl-12 mb-4">
                                        <!-- Pie chart with legend example 1-->
                                        <div class="card h-100">
                                            <div class="card-header">Humidity</div>
                                            <div class="card-body">
                                                <div class="chart-pie mb-4"><canvas id="myPieChart1" width="100%"
                                                        height="50"></canvas></div>
                                                <div class="list-group list-group-flush">
                                                    <div
                                                        class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                        <div class="me-3">
                                                            <i class="fas fa-circle fa-sm me-1 text-primary"></i>
                                                            Humidity
                                                        </div>
                                                        <div class="fw-500 text-dark" id="resultXX"></div>
                                                    </div>
                                                    <div
                                                        class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                        <div class="me-3">
                                                            <i class="fas fa-circle fa-sm me-1 text-muted"></i>
                                                            Remaining Area
                                                        </div>
                                                        <div class="fw-500 text-dark" id="resultYY"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-xl-12 mb-4">
                                        <!-- Pie chart with legend example 2-->
                                        <div class="card h-100">
                                            <div class="card-header">AQI</div>
                                            <div class="card-body">
                                                <div class="chart-pie mb-4"><canvas id="myPieChart2" width="100%"
                                                        height="50"></canvas></div>
                                                <div class="list-group list-group-flush">
                                                    <div
                                                        class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                        <div class="me-3">
                                                            <i class="fas fa-circle fa-sm me-1 text-green"></i>
                                                            AQI
                                                        </div>
                                                        <div class="fw-500 text-dark" id="resultXXX"></div>
                                                    </div>
                                                    <div
                                                        class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                        <div class="me-3">
                                                            <i class="fas fa-circle fa-sm me-1 text-muted"></i>
                                                            Remaining Area
                                                        </div>
                                                        <div class="fw-500 text-dark" id="resultYYY"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Example DataTable for Dashboard Demo-->
                            <div class="card mb-4">
                                <div class="card-header">Record</div>
                                <div class="card-body">
                                    <table id="example" class="table table-striped" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Time</th>
                                                <th>Temperature</th>
                                                <th>Humidity</th>
                                                <th>AQI</th>
                                                <th>Power</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% Object.values(users).forEach((doc)=> { %>
                                                <tr>
                                                    <td>
                                                        <%= doc.date.toLocaleDateString() %>
                                                    </td>
                                                    <td>
                                                        <%= doc.date.toISOString().split('T')[1].substring(0, 5); %>
                                                    </td>
                                                    <td>
                                                        <%= doc.temperature %> °C
                                                    </td>
                                                    <td>
                                                        <%= doc.humidity %> %
                                                    </td>
                                                    <td>
                                                        <%= doc.aqi %> µg./m3
                                                    </td>
                                                    <td>
                                                        <% doc.current *=220; %>
                                                            <%= doc.current %> Watt
                                                    </td>
                                                </tr>
                                                <% }) %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </main>
                        <%- include('footer.ejs') %>
                    </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
                crossorigin="anonymous"></script>
            <script src="js/scripts.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
                crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
            <script src="/js/datatables/datatables-simple-demo.js"></script>
            <script src="assets/demo/chart-area-demo.js"></script>
            <script src="assets/demo/chart-bar-demo.js"></script>
            <script src="assets/demo/chart-pie-demo.js"></script>
            <script src="assets/demo/chart-pie-aqi.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/litepicker/dist/bundle.js" crossorigin="anonymous"></script>
            <script src="js/scrollpos.js"></script>
            <script src="js/refreshTime.js"></script>
            <script src="js/data.js"></script>
    </body>

</html>