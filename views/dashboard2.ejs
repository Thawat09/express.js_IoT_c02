<!DOCTYPE html>
<html lang="en">
<%- include('head.ejs') %>

    <body class="nav-fixed">
        <%- include('navbar.ejs') %>
            <div id="layoutSidenav">
                <%- include('sidebar.ejs') %>
                    <div id="layoutSidenav_content">
                        <main>
                            <header class="page-header page-header-dark pb-10">
                                <div class="container-xl px-4">
                                    <div class="page-header-content pt-4">
                                        <div class="row align-items-center justify-content-between">
                                            <div class="col-auto mt-4">
                                                <h1 class="page-header-title">
                                                    <div class="page-header-icon"><i data-feather="activity"></i></div>
                                                    Dashboard
                                                </h1>
                                                <div class="page-header-subtitle">Dashboard overview and content
                                                    summary</div>
                                                <div class="small">
                                                    <i class="far fa-clock fa-spin fa-lg text-white-50"></i>
                                                    <span class="fw-500 text-white-50" id="time"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </header>
                            <!-- Main page content-->
                            <div class="container-xl px-4 mt-n10">
                                <div class="row">
                                    <div class="col-xxl-8">
                                        <!-- Tabbed dashboard card example-->
                                        <div class="card mb-4">
                                            <div class="card-header border-bottom">
                                                <!-- Dashboard card navigation-->
                                                <ul class="nav nav-tabs card-header-tabs" id="dashboardNav"
                                                    role="tablist">
                                                    <li class="nav-item me-1"><a class="nav-link active"
                                                            id="temperature-pill" href="#temperature"
                                                            data-bs-toggle="tab" role="tab" aria-controls="temperature"
                                                            aria-selected="true">Temperature</a></li>
                                                    <li class="nav-item"><a class="nav-link" id="humidity-pill"
                                                            href="#humidity" data-bs-toggle="tab" role="tab"
                                                            aria-controls="humidity" aria-selected="false">Humidity</a>
                                                    </li>
                                                    <li class="nav-item"><a class="nav-link" id="aqi-pill" href="#aqi"
                                                            data-bs-toggle="tab" role="tab" aria-controls="aqi"
                                                            aria-selected="false">AQI</a></li>
                                                </ul>
                                            </div>
                                            <div class="card-body">
                                                <div class="tab-content" id="dashboardNavContent">
                                                    <!-- Dashboard Tab Pane 1-->
                                                    <div class="tab-pane fade show active" id="temperature"
                                                        role="tabpanel" aria-labelledby="temperature-pill">
                                                        <div class="chart-area mb-4 mb-lg-0" style="height: 20rem">
                                                            <canvas id="myAreaChart" width="100%" height="30"></canvas>
                                                        </div>
                                                    </div>
                                                    <!-- Dashboard Tab Pane 2-->
                                                    <div class="tab-pane fade" id="humidity" role="tabpanel"
                                                        aria-labelledby="humidity-pill">
                                                        <div class="chart-area mb-4 mb-lg-0" style="height: 20rem">
                                                            <canvas id="myAreaChart1" width="100%" height="30"></canvas>
                                                        </div>
                                                    </div>
                                                    <!-- Dashboard Tab Pane 3-->
                                                    <div class="tab-pane fade" id="aqi" role="tabpanel"
                                                        aria-labelledby="aqi-pill">
                                                        <div class="chart-area mb-4 mb-lg-0" style="height: 20rem">
                                                            <canvas id="myAreaChart2" width="100%" height="30"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Illustration dashboard card example-->
                                        <div class="row">
                                            <div class="col-xl-6 mb-4">
                                                <!-- Pie chart with legend example-->
                                                <div class="card h-100">
                                                    <div class="card-header">Temperature</div>
                                                    <div class="card-body">
                                                        <div class="chart-pie mb-4"><canvas id="myPieChart" width="100%"
                                                                height="50"></canvas></div>
                                                        <div class="list-group list-group-flush">
                                                            <div
                                                                class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                                <div class="me-3">
                                                                    <i
                                                                        class="fas fa-circle fa-sm me-1 text-warning"></i>
                                                                    Temperature
                                                                </div>
                                                                <div class="fw-500 text-dark" id="resultX"></div>
                                                            </div>
                                                            <div
                                                                class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                                <div class="me-3">
                                                                    <i class="fas fa-circle fa-sm me-1 text-muted"></i>
                                                                    Remaining Area
                                                                </div>
                                                                <div class="fw-500 text-dark" id="resultY"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-6 mb-4">
                                                <!-- Pie chart with legend example 1-->
                                                <div class="card h-100">
                                                    <div class="card-header">Humidity</div>
                                                    <div class="card-body">
                                                        <div class="chart-pie mb-4"><canvas id="myPieChart1"
                                                                width="100%" height="50"></canvas></div>
                                                        <div class="list-group list-group-flush">
                                                            <div
                                                                class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                                <div class="me-3">
                                                                    <i
                                                                        class="fas fa-circle fa-sm me-1 text-primary"></i>
                                                                    Humidity
                                                                </div>
                                                                <div class="fw-500 text-dark" id="resultXX"></div>
                                                            </div>
                                                            <div
                                                                class="list-group-item d-flex align-items-center justify-content-between small px-0 py-2">
                                                                <div class="me-3">
                                                                    <i class="fas fa-circle fa-sm me-1 text-muted"></i>
                                                                    Remaining Area
                                                                </div>
                                                                <div class="fw-500 text-dark" id="resultYY"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4">
                                        <div class="row">
                                            <div class="col-xl-6 col-xxl-12">
                                                <!-- Project tracker card example-->
                                                <div class="card card-header-actions mb-4">
                                                    <div class="card-header">Progress Tracker</div>
                                                    <div class="card-body">
                                                        <% if (temp) { %>
                                                            <h4 class="small">
                                                                Temperature
                                                                <span class="float-end fw-bold" id="tempdata">
                                                                </span>
                                                            </h4>
                                                            <div class="progress mb-4">
                                                                <div class="progress-bar bg-warning" role="progressbar"
                                                                    style="width: <%= temp.temperature %>%"
                                                                    aria-valuenow="<%= temp.temperature %>"
                                                                    aria-valuemin="0" aria-valuemax="80"></div>
                                                            </div>
                                                            <h4 class="small">
                                                                Humidity
                                                                <span class="float-end fw-bold" id="humdata">
                                                                </span>
                                                            </h4>
                                                            <div class="progress mb-4">
                                                                <div class="progress-bar bg-primary" role="progressbar"
                                                                    style="width: <%= temp.humidity %>%"
                                                                    aria-valuenow="<%= temp.humidity %>"
                                                                    aria-valuemin="0" aria-valuemax="100"></div>
                                                            </div>
                                                            <h4 class="small">
                                                                AQI
                                                                <span class="float-end fw-bold" id="aqidata">
                                                                </span>
                                                            </h4>
                                                            <div class="progress mb-4">
                                                                <div class="progress-bar bg-success" role="progressbar"
                                                                    style="width: <%= temp.aqi %>%"
                                                                    aria-valuenow="<%= temp.aqi %>" aria-valuemin="0"
                                                                    aria-valuemax="500"></div>
                                                            </div>
                                                            <h4 class="small">
                                                                Power
                                                                <span class="float-end fw-bold" id="currentdata">
                                                                </span>
                                                            </h4>
                                                            <div class="progress mb-4">
                                                                <div class="progress-bar bg-red" role="progressbar"
                                                                    style="width: <%= temp.current %>%"
                                                                    aria-valuenow="<%= temp.current %>"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                </div>
                                                            </div>
                                                            <% } %>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xl-6 col-xxl-12">
                                                    <!-- Team members / people dashboard card example-->
                                                    <div class="card mb-4">
                                                        <div class="card-header">People</div>
                                                        <div class="card-body">
                                                            <!-- Item 1-->
                                                            <% Object.values(users1).forEach((doc1)=> { %>
                                                                <div
                                                                    class="d-flex align-items-center justify-content-between mb-4">
                                                                    <div
                                                                        class="d-flex align-items-center flex-shrink-0 me-3">
                                                                        <div class="avatar avatar-xl me-3 bg-gray-200">
                                                                            <img class="avatar-img img-fluid"
                                                                                src="assets/img/favicon.png" alt="" />
                                                                        </div>
                                                                        <div class="d-flex flex-column fw-bold">
                                                                            <a class="text-dark line-height-normal mb-1"
                                                                                href="<%= doc1.serialnumber %>/dashboard1">
                                                                                <%= doc1.namesensor %>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <% }) %>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </main>
                        <%- include('footer.ejs') %>
                    </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
                crossorigin="anonymous"></script>
            <script src="js/scripts.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
                crossorigin="anonymous"></script>
            <script src="assets/demo/chart-area-demo.js"></script>
            <script src="assets/demo/chart-pie-demo.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
            <script src="js/datatables/datatables-simple-demo.js"></script>
            <script src="js/scrollpos.js"></script>
            <script src="js/refreshTime.js"></script>
            <script src="js/data.js"></script>
    </body>

</html>